<input
  (keydown.arrowDown)="offsetFocused(1, $event)"
  (keydown.arrowUp)="offsetFocused(-1, $event)"
  (keydown.enter)="selectFocused($event)"
  [disabled]="isDisabled"
  ctrlInput
>
<button
  (blur)="onBlur()"
  (focus)="onFocus()"
  (keydown.arrowDown)="offsetFocused(1, $event)"
  (keydown.arrowUp)="offsetFocused(-1, $event)"
  (keydown.enter)="selectFocused($event)"
  class="field-suffix"
  tabindex="-1"
>
  <ctrl-icon [icon]="iconChevronDown"></ctrl-icon>
</button>
<button
  (click)="clear()"
  class="field-suffix clear"
  tabindex="-1"
>
  <ctrl-icon [icon]="iconClose"></ctrl-icon>
</button>
<div *ngIf="hasDropdown" class="field-dropdown">
  <button
    (blur)="onBlur()"
    (click)="select(item, $event.target)"
    (focus)="focusIndex = index; onFocus()"
    (keydown.arrowDown)="offsetFocused(1, $event)"
    (keydown.arrowUp)="offsetFocused(-1, $event)"
    (keydown.enter)="selectFocused($event)"
    *ngFor="let item of filtered; let index = index"
    [class.focused]="focusIndex === index"
    tabindex="-1"
    type="button"
  >
    {{item.text}}
  </button>
</div>
